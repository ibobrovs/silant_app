{% extends 'core/base.html' %}

{% block content %}
<h2>–°–ø–∏—Å–æ–∫ –º–∞—à–∏–Ω</h2>

<!-- üîç –§–∏–ª—å—Ç—Ä -->
<form method="get" class="row row-cols-lg-auto g-3 align-items-center mb-4">
  <div class="col">
    <select name="model" class="form-select">
      <option value="">–ú–æ–¥–µ–ª—å</option>
      {% for item in models %}
        <option value="{{ item.id }}" {% if selected.model == item.id|stringformat:"s" %}selected{% endif %}>{{ item.name }}</option>
      {% endfor %}
    </select>
  </div>

  <div class="col">
    <select name="engine" class="form-select">
      <option value="">–î–≤–∏–≥–∞—Ç–µ–ª—å</option>
      {% for item in engines %}
        <option value="{{ item.id }}" {% if selected.engine == item.id|stringformat:"s" %}selected{% endif %}>{{ item.name }}</option>
      {% endfor %}
    </select>
  </div>

  <div class="col">
    <select name="transmission" class="form-select">
      <option value="">–¢—Ä–∞–Ω—Å–º–∏—Å—Å–∏—è</option>
      {% for item in transmissions %}
        <option value="{{ item.id }}" {% if selected.transmission == item.id|stringformat:"s" %}selected{% endif %}>{{ item.name }}</option>
      {% endfor %}
    </select>
  </div>

  <div class="col">
    <select name="drive_axle" class="form-select">
      <option value="">–í–µ–¥—É—â–∏–π –º–æ—Å—Ç</option>
      {% for item in drive_axles %}
        <option value="{{ item.id }}" {% if selected.drive_axle == item.id|stringformat:"s" %}selected{% endif %}>{{ item.name }}</option>
      {% endfor %}
    </select>
  </div>

  <div class="col">
    <select name="steered_axle" class="form-select">
      <option value="">–£–ø—Ä–∞–≤–ª—è–µ–º—ã–π –º–æ—Å—Ç</option>
      {% for item in steered_axles %}
        <option value="{{ item.id }}" {% if selected.steered_axle == item.id|stringformat:"s" %}selected{% endif %}>{{ item.name }}</option>
      {% endfor %}
    </select>
  </div>

  <div class="col">
    <button type="submit" class="btn btn-primary">–§–∏–ª—å—Ç—Ä</button>
  </div>
</form>

<!-- üìã –¢–∞–±–ª–∏—Ü–∞ -->
<div class="table-responsive">
  <table class="table table-hover table-bordered">
    <thead class="table-light">
      <tr>
        <th>–ú–æ–¥–µ–ª—å</th>
        <th>–°–µ—Ä–∏–π–Ω—ã–π –Ω–æ–º–µ—Ä</th>
        <th>–î–∞—Ç–∞ –æ—Ç–≥—Ä—É–∑–∫–∏</th>
        <th>–î–≤–∏–≥–∞—Ç–µ–ª—å</th>
        <th>–¢—Ä–∞–Ω—Å–º–∏—Å—Å–∏—è</th>
        <th>–í–µ–¥—É—â–∏–π –º–æ—Å—Ç</th>
        <th>–£–ø—Ä–∞–≤–ª—è–µ–º—ã–π –º–æ—Å—Ç</th>
        <th>–ú–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</th>
        <th>–°–µ—Ä–≤–∏—Å–Ω–∞—è –∫–æ–º–ø–∞–Ω–∏—è</th>
      </tr>
    </thead>
    <tbody>
      {% for machine in machines %}
        <tr onclick="window.location='{% url 'machine_detail' machine.pk %}'" style="cursor:pointer;">
          <td>{{ machine.model.name }}</td>
          <td>{{ machine.serial_number }}</td>
          <td>{{ machine.shipment_date|date:"d.m.Y" }}</td>
          <td>{{ machine.engine_model.name }}</td>
          <td>{{ machine.transmission_model.name }}</td>
          <td>{{ machine.drive_axle_model.name }}</td>
          <td>{{ machine.steered_axle_model.name }}</td>
          <td>{{ machine.usage_place }}</td>
          <td>{{ machine.service_company.name }}</td>
        </tr>
      {% empty %}
        <tr><td colspan="9">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
